<view class="main _div"><view class="{{['wrapper','_div',display?'blur':'']}}"><view class="{{['hidden-bar','flex','align-center','justify-around','bg-white','_div',active?'show':'hide']}}"><picker style="flex:1;" value="{{index}}" range="{{weeks}}" data-event-opts="{{[['change',[['weekChange',['$event']]]]]}}" bindchange="__e"><view class="iconfont icon-group _i" data-label="选择周数"></view></picker><view class="iconfont icon-done _i" data-label="当前周" data-event-opts="{{[['tap',[['setCurrentSchedule',['$event']]]]]}}" bindtap="__e"></view><view class="iconfont icon-calendar _i" data-label="全学期" data-event-opts="{{[['tap',[['setAllSchedule',['$event']]]]]}}" bindtap="__e"></view></view><view class="day-bar grid bg-white _div"><block wx:if="{{logged}}"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="line-group week flex flex-column align-center justify-center py-2 _div" bindtap="__e"><view class="{{['line','_div',active?'line-one-active':'']}}"></view><view class="{{['line','_div',active?'line-two-active':'']}}"></view><view class="{{['line','_div',active?'line-three-active':'']}}"></view></view><block wx:for="{{days}}" wx:for-item="day" wx:for-index="i" wx:key="i"><view class="week py-2 _div">{{''+day+''}}</view></block></block></view><view class="content py-1 _div"><block wx:if="{{logged&&currentWeek}}"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view class="grid courses _div"><view class="period flex align-center justify-center p-3 _div">{{''+periods[i]+''}}</view><block wx:for="{{item.l0}}" wx:for-item="it" wx:for-index="key" wx:key="key"><view class="course flex align-center justify-center _div"><block wx:if="{{it.g0>0}}"><view data-event-opts="{{[['tap',[['showDetail',['$0',i,key],[[['schedule','',i],['','',key,'course.__$n0']]]]]]]}}" class="course-content flex flex-column align-center justify-center _div" style="{{(currentDay===key+1?'background: #5d97f7':'')}}" bindtap="__e"><label class="mb-1 _span">{{it.$orig.course[0].name}}</label><view class="_br"></view><label class="_span">{{it.$orig.course[0].room}}</label></view></block><block wx:else><view data-event-opts="{{[['tap',[['showAddActivityForm',['$event']]]]]}}" class="add-activity flex align-center justify-center _div" style="background-color:#fff;" bindtap="__e"><image style="width:10px;height:10px;" src="/static/icons/add.png"></image></view></block></view></block></view></block></block><block wx:if="{{!logged}}"><view class="to-login flex flex-column align-center justify-center _div"><image class="to-login__icon" src="/static/images/img-tip.svg" mode="widthFix"></image><view class="gray m-3 _div">登录后查看课表</view><navigator class="to-login__btn bg-primary" url="../login/main">前往登录</navigator></view></block></view></view><view class="{{['modal','_div',display?'modal-display':'modal-hidden']}}"><view class="modal-header _div"><view class="flex align-center _div" style="overflow:hidden;"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="iconfont icon-clear mr-2 p-2 _i" style="flex:0;margin-left:auto;font-weight:bold;" bindtap="__e"></view></view></view><view class="modal-content _div"><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/name.svg" mode="widthFix"></image><label class="_span">课程名称</label><label class="gray ml-2 _span">{{detail.name}}</label></view><view class="modal-grid _div"><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/teacher.svg" mode="widthFix"></image><label class="_span">任课老师</label><label class="gray ml-2 _span">{{detail.teacher}}</label></view><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/map.svg" mode="widthFix"></image><label class="_span">课室地点</label><label class="gray ml-2 _span">{{detail.room}}</label></view><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/3D-chart.svg" mode="widthFix"></image><label class="_span">课程代码</label><label class="gray ml-2 _span">{{detail.code}}</label></view><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/pie-chart.svg" mode="widthFix"></image><label class="_span">上课周数</label><block wx:if="{{detail.weeks}}"><label class="gray ml-2 _span">{{''+detail.weekEachLesson+''}}</label></block></view></view><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/name.svg" mode="widthFix"></image><label class="_span">设置备忘</label><label class="gray ml-2 _span"><input placeholder="请输入提醒内容" data-event-opts="{{[['input',[['__set_model',['','content','$event',[]]]]]]}}" value="{{content}}" bindinput="__e"/></label><button data-event-opts="{{[['tap',[['sendMessage',['$0','$1','$2'],['content','detail.name','detail.room']]]]]}}" class="to-login__btn01 bg-primary" bindtap="__e">设置</button></view><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/reminder.png" mode="widthFix"></image><label class="_span">作业提醒</label><label class="gray ml-2 _span" style="width:25%;"><input placeholder="请输入提醒内容" data-event-opts="{{[['input',[['__set_model',['','homeworkcontent','$event',[]]]]]]}}" value="{{homeworkcontent}}" bindinput="__e"/></label><picker class="gray picker01 ml-2" mode="selector" range="{{days01}}" value="{{daysUntilReminder}}" data-event-opts="{{[['change',[['updateDaysUntilReminder',['$event']]]],['input',[['__set_model',['','daysUntilReminder','$event',[]]]]]]}}" bindchange="__e" bindinput="__e"><input style="width:100%;" type="text" placeholder="选择时间" value="{{days01[daysUntilReminder]}}"/></picker><button data-event-opts="{{[['tap',[['sendHomeworkReminder',['$0','$1','$2'],['homeworkcontent','detail.name','detail.room']]]]]}}" class="to-login__btn01 bg-primary" bindtap="__e">设置</button></view></view></view><view class="{{['modal','_div',displayAddActivityForm?'modal-display':'modal-hidden']}}"><view class="modal-header _div"><view class="flex align-center _div" style="overflow:hidden;"><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="iconfont icon-clear mr-2 p-2 _i" style="flex:0;margin-left:auto;font-weight:bold;" bindtap="__e"></view></view></view><view class="modal-content _div"><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/name.svg" mode="widthFix"></image><label class="_span">活动名称</label><label class="gray ml-2 _span"><input placeholder="请输入活动名称" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['newActivity']]]]]}}" value="{{newActivity.name}}" bindinput="__e"/></label></view><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/teacher.svg" mode="widthFix"></image><label class="_span">活动地点</label><label class="gray ml-2 _span"><input placeholder="请输入活动地点" data-event-opts="{{[['input',[['__set_model',['$0','location','$event',[]],['newActivity']]]]]}}" value="{{newActivity.location}}" bindinput="__e"/></label></view><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/teacher.svg" mode="widthFix"></image><label class="_span">活动时间</label><label class="gray ml-2 _span"><input placeholder="请输入活动时间" data-event-opts="{{[['input',[['__set_model',['$0','time','$event',[]],['newActivity']]]]]}}" value="{{newActivity.time}}" bindinput="__e"/></label></view><view class="flex align-center mb-2 _div"><image class="modal-icon mr-1" src="/static/images/name.svg" mode="widthFix"></image><label class="_span">设置备忘</label><label class="gray ml-2 _span"><input placeholder="请输入提醒内容" data-event-opts="{{[['input',[['__set_model',['','content','$event',[]]]]]]}}" value="{{content}}" bindinput="__e"/></label><button data-event-opts="{{[['tap',[['sendMessage',['$0','$1','$2'],['content','detail.name','detail.room']]]]]}}" class="to-login__btn01 bg-primary" bindtap="__e">设置</button></view></view></view></view>