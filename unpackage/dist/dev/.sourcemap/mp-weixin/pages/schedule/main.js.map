{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/Code/Uniapp/GoGo/pages/schedule/main.vue?16d4","webpack:///D:/Code/Uniapp/GoGo/pages/schedule/main.vue?0204","webpack:///D:/Code/Uniapp/GoGo/pages/schedule/main.vue?b8a1","uni-app:///pages/schedule/main.vue","webpack:///D:/Code/Uniapp/GoGo/pages/schedule/main.vue?d51d","webpack:///D:/Code/Uniapp/GoGo/pages/schedule/main.vue?e5b8"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","currentDay","currentWeek","periods","display","detail","name","teacher","room","code","weeks","days","active","content","homeworkcontent","reminderTime","daysUntilReminder","days01","mounted","computed","index","logged","schedule","methods","updateDaysUntilReminder","getCurrentSchedule","console","course","toLocalISOString","dif","pad","sendMessage","content01","content01String","date","localIsoDate","localDateTime","openId","templateId","msg","uni","title","icon","sendHomeworkReminder","setNavigationBarTitle","createhomeworkJson","createJson","weekChange","setCurrentSchedule","setAllSchedule","getReminderTime","period","startTime","user","start","termStartDate","state","dateOffset","year","month","day","hours","minutes","seconds","showDetail","onShareAppMessage","path"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AAC+K;AAC/K,gBAAgB,sLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAA6pB,CAAgB,2pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACiOjrB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eAEA;EACAC;IACA;MACAC;MACAC;MACAC,UACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,gBACA;MACAC;MAAA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAAA;MACAC;MACAD;MACAE;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;IACA;IACA;IACA;EACA;EAEAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IAEAC;MACA;QACA;QACA;MACA;MACA;IACA;EACA;EAEAC;IACAC;MACA;IACA;IACAC;MACAC;MACA;QACAA;QACA;UACA;YACA;cACA;gBACA;cACA;;cACA;gBAAAC;cAAA;YACA;YACA;UACA;QACA;MACA;MACAD;MACA;IACA;IACAE;MACA;QACAC;QACAC;UACA;UACA;QACA;MACA,4BACA,iCACA,4BACA,6BACA,+BACA,+BACAD,sBACA;IACA;IACAE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAL;gBACAM;gBACAC;gBACAC;gBACAC;gBACAC;gBAAA;gBAAA,OAEA;kBACAC;kBACAC;kBACAzB;kBACAE;gBACA;cAAA;gBAAA;gBALAN;gBAAA8B;gBAMA;kBACAC;oBACAC;oBACAC;kBACA;gBACA;kBACAF;oBACAC;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAT,sCAEA;gBACAA;;gBAEA;gBACAA;gBACAA;gBACAA;;gBAEA;gBACAC;gBACAC,4CAEA;gBACAJ;gBACAC,6CAEA;gBAAA;gBAAA,OACA;kBACAI;kBACAC;kBACAzB;kBACAE;gBACA;cAAA;gBAAA;gBALAN;gBAAA8B;gBAMA;kBACAC;oBACAC;oBACAC;kBACA;gBACA;kBACAF;oBACAC;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAE;MACAJ;QACAC;MACA;IACA;IACAI;MACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;UACA;QACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IAEAC;MACA;MACAT;QAAAC;MAAA;IACA;IACAS;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACAC;gBACAC;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBAAA,MAEAA;kBAAA;kBAAA;gBAAA;gBACA5B;gBACA6B;gBACAC;gBACAtD;gBACAD;gBACAwD;gBACAF;gBACArB;gBAAA;gBAAA;cAAA;gBAAA,kCAGA;cAAA;gBAGA;gBACAA;gBACAA;gBACA;gBACA;gBACA;gBACAwB;gBACAC;gBACAC;gBACAC;gBACAC;gBACAC;gBACArC;gBAAA,4CACAgC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAM;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAA;gBACAtC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EACA;EAEAuC;IACA;MACAxB;MACAyB;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1eA;AAAA;AAAA;AAAA;AAAw8B,CAAgB,k6BAAG,EAAC,C;;;;;;;;;;;ACA59B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/schedule/main.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/schedule/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=16efe608&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/schedule/main.vue\"\nexport default component.exports","export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=16efe608&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l1 =\n    _vm.logged && _vm.currentWeek\n      ? _vm.__map(_vm.schedule, function (item, i) {\n          var $orig = _vm.__get_orig(item)\n          var l0 = _vm.__map(item, function (it, key) {\n            var $orig = _vm.__get_orig(it)\n            var g0 = it.course.length\n            return {\n              $orig: $orig,\n              g0: g0,\n            }\n          })\n          return {\n            $orig: $orig,\n            l0: l0,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.active = !_vm.active\n    }\n    _vm.e1 = function ($event) {\n      _vm.display = false\n      this.reminderTime = \"\"\n      this.content = \"\"\n      this.homeworkcontent = \"\"\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"main\">\n    <div\n        class=\"wrapper\"\n        :class=\"display ? 'blur' : ''\"\n    >\n      <div\n          class=\"hidden-bar flex align-center justify-around bg-white\"\n          :class=\"active ? 'show' : 'hide'\"\n      >\n        <picker\n            style=\"flex: 1;\"\n            @change=\"weekChange\"\n            :value=\"index\"\n            :range=\"weeks\"\n        >\n          <i\n              class=\"iconfont icon-group\"\n              data-label=\"选择周数\"\n          ></i>\n        </picker>\n        <i\n            class=\"iconfont icon-done\"\n            data-label=\"当前周\"\n            @click=\"setCurrentSchedule\"\n        ></i>\n        <i\n            class=\"iconfont icon-calendar\"\n            data-label=\"全学期\"\n            @click=\"setAllSchedule\"\n        ></i>\n      </div>\n\n      <div class=\"day-bar grid bg-white\">\n        <template v-if=\"logged\">\n          <div\n              class=\"line-group week flex flex-column align-center justify-center py-2\"\n              @click=\"active = !active\"\n          >\n            <div\n                class=\"line\"\n                :class=\" active ? 'line-one-active' : ''\"\n            ></div>\n            <div\n                class=\"line\"\n                :class=\" active ? 'line-two-active' : ''\"\n            ></div>\n            <div\n                class=\"line\"\n                :class=\" active ? 'line-three-active' : ''\"\n            ></div>\n          </div>\n          <div\n              class=\"week py-2\"\n              v-for=\"(day, i) in days\"\n              :key=\"i\"\n          >\n            {{ day }}\n          </div>\n        </template>\n      </div>\n\n      <div class=\"content py-1\">\n        <template v-if=\"logged && currentWeek\">\n          <div\n              class=\"grid courses\"\n              v-for=\"(item, i) in schedule\"\n              :key=\"i\"\n          >\n            <!-- 时间段 -->\n            <div class=\"period flex align-center justify-center p-3\">\n              {{ periods[i] }}\n            </div>\n            <!-- 课程内容 -->\n            <div\n                class=\"course flex align-center justify-center\"\n                v-for=\"(it, key) in item\"\n                :key=\"key\"\n            >\n              <div\n                  class=\"course-content flex flex-column align-center justify-center\"\n                  :style=\"currentDay === key + 1 ? 'background: #5d97f7' : ''\"\n                  v-if=\"it.course.length > 0\"\n                  @click=\"showDetail(it.course[0], i ,key)\"\n              >\n                <span class=\"mb-1\">{{ it.course[0].name }}</span>\n                <br/>\n                <span>{{ it.course[0].room }}</span>\n              </div>\n              <div v-else></div>\n            </div>\n          </div>\n        </template>\n\n        <!-- 前往登录 -->\n        <div\n            class=\"to-login flex flex-column align-center justify-center\"\n            v-if=\"!logged\"\n        >\n          <image\n              class=\"to-login__icon\"\n              src=\"/static/images/img-tip.svg\"\n              mode=\"widthFix\"\n          />\n          <div class=\"gray m-3\">登录后查看课表</div>\n          <navigator\n              class=\"to-login__btn bg-primary\"\n              url=\"../login/main\"\n          >前往登录\n          </navigator>\n        </div>\n      </div>\n    </div>\n    <div\n        class=\"modal\"\n        :class=\"display ? 'modal-display' : 'modal-hidden'\"\n    >\n      <div class=\"modal-header\">\n        <div\n            class=\"flex align-center\"\n            style=\"overflow: hidden;\"\n        >\n          <i\n              class=\"iconfont icon-clear mr-2 p-2\"\n              style=\"flex: 0;margin-left: auto;font-weight: bold;\"\n              @click=\"display = false;this.reminderTime = '';this.content = '';this.homeworkcontent= '';\"\n          ></i>\n        </div>\n      </div>\n\n      <div class=\"modal-content\">\n        <div class=\"flex align-center mb-2\">\n          <image\n              class=\"modal-icon mr-1\"\n              src=\"/static/images/name.svg\"\n              mode=\"widthFix\"\n          />\n          <span>课程名称</span>\n          <span class=\"gray ml-2\">{{ detail.name }}</span>\n        </div>\n        <div class=\"modal-grid\">\n          <div class=\"flex align-center mb-2\">\n            <image\n                class=\"modal-icon mr-1\"\n                src=\"/static/images/teacher.svg\"\n                mode=\"widthFix\"\n            />\n            <span>任课老师</span>\n            <span class=\"gray ml-2\">{{ detail.teacher }}</span>\n          </div>\n          <div class=\"flex align-center mb-2\">\n            <image\n                class=\"modal-icon mr-1\"\n                src=\"/static/images/map.svg\"\n                mode=\"widthFix\"\n            />\n            <span>课室地点</span>\n            <span class=\"gray ml-2\">{{ detail.room }}</span>\n          </div>\n          <div class=\"flex align-center mb-2\">\n            <image\n                class=\"modal-icon mr-1\"\n                src=\"/static/images/3D-chart.svg\"\n                mode=\"widthFix\"\n            />\n            <span>课程代码</span>\n            <span class=\"gray ml-2\">{{ detail.code }}</span>\n          </div>\n          <div class=\"flex align-center mb-2\">\n            <image\n                class=\"modal-icon mr-1\"\n                src=\"/static/images/pie-chart.svg\"\n                mode=\"widthFix\"\n            />\n            <span>上课周数</span>\n            <span\n                class=\"gray ml-2\"\n                v-if=\"detail.weeks\"\n            >\n              {{ detail.weekEachLesson }}\n            </span>\n          </div>\n        </div>\n\n        <div class=\"flex align-center mb-2\">\n          <image\n              class=\"modal-icon mr-1\"\n              src=\"/static/images/name.svg\"\n              mode=\"widthFix\"\n          />\n          <span>设置备忘</span>\n          <span class=\"gray ml-2\"><input v-model=\"content\" placeholder=\"输入提醒内容\"></span>\n          <!-- 生成一个蓝色圆角的按钮 -->\n          <button class=\"to-login__btn01 bg-primary\" @click=\"sendMessage(content,detail.name,detail.room)\">设置</button>\n        </div>\n\n        <div class=\"flex align-center mb-2\">\n          <image\n              class=\"modal-icon mr-1\"\n              src=\"/static/images/reminder.png\"\n              mode=\"widthFix\"\n          />\n          <span>作业提醒</span>\n          <span class=\"gray ml-2\" style=\"width: 25%\"><input v-model=\"homeworkcontent\" placeholder=\"输入提醒内容\"></span>\n          <picker mode=\"selector\" :range=\"days01\" v-model=\"daysUntilReminder\" @change=\"updateDaysUntilReminder\"\n                  class=\"gray picker01 ml-2\">\n            <!--            <i-->\n            <!--                class=\"iconfont\"-->\n            <!--                data-label=\"选择周数\"-->\n            <!--            ></i>-->\n            <input type=\"text\" :value=\"days01[daysUntilReminder]\" placeholder=\"选择周数\" style=\"width: 100%\"/>\n          </picker>\n\n          <!-- 生成一个蓝色圆角的按钮 -->\n          <button class=\"to-login__btn01 bg-primary\"\n                  @click=\"sendHomeworkReminder(homeworkcontent,detail.name,detail.room)\">设置\n          </button>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport index from \"vuex\";\nimport {getTermStart, sendSubscribeMessage} from \"@/request/api\";\n\nexport default {\n  data() {\n    return {\n      currentDay: null,\n      currentWeek: null,\n      periods: [\n        '08:00 - 08:45',\n        '08:55 - 09:40',\n        '10:00 - 10:45',\n        '10:55 - 11:40',\n        '14:00 - 14:45',\n        '14:55 - 15:40',\n        '15:50 - 16:35',\n        '16:45 - 17:30',\n        '19:00 - 19.45',\n        '19:55 - 20.40',\n      ],\n      display: false, // 是否显示课程详细信息\n      detail: {\n        name: '--',\n        teacher: '--',\n        room: '--',\n        code: '--',\n        weeks: [1]\n      }, // 课程详细信息\n      days: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],\n      weeks: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],\n      active: false,\n      content: '',\n      homeworkcontent: '',\n      reminderTime: '',\n      daysUntilReminder: '',\n      days01: ['1天后', '2天后', '3天后', '4天后', '5天后', '6天后', '7天后'],\n    }\n  },\n\n  mounted() {\n    const state = this.$store.state\n    this.currentWeek = state.currentWeek\n    this.currentDay = state.currentDay\n    this.setNavigationBarTitle(this.currentWeek)\n  },\n\n  computed: {\n    index() {\n      return index\n    },\n    logged() {\n      return this.$store.state.logged\n    },\n\n    schedule() {\n      if (this.logged && this.currentWeek) {\n        this.active = false\n        return this.getCurrentSchedule(this.currentWeek)\n      }\n      return []\n    }\n  },\n\n  methods: {\n    updateDaysUntilReminder(event) {\n      this.daysUntilReminder = event.mp.detail.value;\n    },\n    getCurrentSchedule(week) {\n      console.log(\"传入的周数\" + week)\n      if (week <= 18) {\n        console.log(uni.getStorageSync('schedule'))\n        return uni.getStorageSync('schedule').map(el => {\n          return el.map(item => {\n            if (item.course.length > 0) {\n              const course = item.course.filter(it => {\n                return it.weeks.includes(week) // 修改这一行\n              })\n              return {course}\n            }\n            return item\n          })\n        })\n      }\n      console.log(uni.getStorageSync('schedule'))\n      return uni.getStorageSync('schedule')\n    },\n    toLocalISOString(date) {\n      const tzo = -date.getTimezoneOffset(),\n          dif = tzo >= 0 ? '+' : '-',\n          pad = function (num) {\n            const norm = Math.floor(Math.abs(num));\n            return (norm < 10 ? '0' : '') + norm;\n          };\n      return date.getFullYear() +\n          '-' + pad(date.getMonth() + 1) +\n          '-' + pad(date.getDate()) +\n          'T' + pad(date.getHours()) +\n          ':' + pad(date.getMinutes()) +\n          ':' + pad(date.getSeconds()) +\n          dif + pad(tzo / 60) +\n          ':' + pad(tzo % 60);\n    },\n    async sendMessage(content, name, room) {\n      console.log(content)\n      const content01 = this.createJson(name, room, content, this.reminderTime)\n      const content01String = JSON.stringify(content01);\n      let date = new Date(this.reminderTime);\n      let localIsoDate = this.toLocalISOString(date);\n      let localDateTime = localIsoDate.split('+')[0];\n\n      const {code, msg} = await sendSubscribeMessage({\n        openId: uni.getStorageSync('user').eduUsername,\n        templateId: '5l_6BpkJ0bGLx2JxnK_Nff3t2CweO9SopJKXBE3qfJg',\n        content: content01String,\n        reminderTime: localDateTime,\n      })\n      if (code === '1000') {\n        uni.showToast({\n          title: '发送成功',\n          icon: 'success'\n        })\n      } else {\n        uni.showToast({\n          title: msg,\n          icon: 'none'\n        })\n      }\n    },\n    async sendHomeworkReminder(homeworkcontent, name, room) {\n      // 获取当前的日期和时间\n      let date = new Date(this.reminderTime);\n\n      // 根据用户的选择设置日期\n      date.setDate(date.getDate() + parseInt(this.daysUntilReminder) + 1);\n\n      // 设置时间为早上8点\n      date.setHours(8);\n      date.setMinutes(0);\n      date.setSeconds(0);\n\n      // 将日期和时间转换为ISO格式的字符串\n      let localIsoDate = this.toLocalISOString(date);\n      let localDateTime = localIsoDate.split('+')[0];\n\n      // 创建提醒内容\n      const content01 = this.createhomeworkJson(name, room, homeworkcontent, localDateTime)\n      const content01String = JSON.stringify(content01);\n\n      // 发送提醒\n      const {code, msg} = await sendSubscribeMessage({\n        openId: uni.getStorageSync('user').eduUsername,\n        templateId: 'vOJxRJYk2eSsX2L4DcVqunPtPBHVakraf9x1tXO2Zpo',\n        content: content01String,\n        reminderTime: localDateTime,\n      })\n      if (code === '1000') {\n        uni.showToast({\n          title: '发送成功',\n          icon: 'success'\n        })\n      } else {\n        uni.showToast({\n          title: msg,\n          icon: 'none'\n        })\n      }\n    },\n    setNavigationBarTitle(week) {\n      uni.setNavigationBarTitle({\n        title: `第 ${week} 周课表`\n      })\n    },\n    createhomeworkJson(name, room, content, reminderTime) {\n      return {\n        \"thing1\": {\n          \"value\": content\n        },\n        \"thing2\": {\n          \"value\": name + room\n        },\n        \"time3\": {\n          \"value\": reminderTime\n        }\n      }\n    },\n    createJson(name, room, content, reminderTime) {\n      return {\n        \"thing1\": {\n          \"value\": name + room\n        },\n        \"thing2\": {\n          \"value\": content\n        },\n        \"time3\": {\n          \"value\": reminderTime\n        },\n        \"phrase4\": {\n          \"value\": \"重要\"\n        }\n      }\n    },\n    weekChange(e) {\n      this.currentWeek = +e.mp.detail.value + 1\n      this.setNavigationBarTitle(this.currentWeek)\n    },\n\n    setCurrentSchedule() {\n      const state = this.$store.state\n      this.currentWeek = state.currentWeek\n      this.setNavigationBarTitle(this.currentWeek)\n    },\n\n    setAllSchedule() {\n      this.currentWeek = 19\n      uni.setNavigationBarTitle({title: '全学期课表'})\n    },\n    async getReminderTime(i, key) {\n      const period = this.periods[i] // 获取课程的时间段\n      const startTime = period.split(' - ')[0] // \"10:55\"\n      const user = uni.getStorageSync('user')\n      const start = await getTermStart(user)\n      let date;\n      if (start.code === \"1000\") {\n        console.log(start.data.start)\n        const termStartDate = new Date(start.data.start); // 学期开始日期\n        const state = this.$store.state;\n        const currentWeek = state.currentWeek;\n        const currentDay = state.currentDay - 1; // 将 currentDay 减 1\n        const dateOffset = (currentWeek - 1) * 7 + key; // 日期偏移量\n        termStartDate.setDate(termStartDate.getDate() + dateOffset); // 计算具体日期\n        date = termStartDate;\n      } else {\n        // 创建一个新的 Date 对象\n        return null;\n      }\n\n      // 设置时间\n      date.setHours(parseInt(startTime.split(':')[0]));\n      date.setMinutes(parseInt(startTime.split(':')[1]));\n      // console.log(date)\n      // return date;\n      // 格式化日期\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      const hours = String(date.getHours()).padStart(2, '0');\n      const minutes = String(date.getMinutes()).padStart(2, '0');\n      const seconds = String(date.getSeconds()).padStart(2, '0');\n      console.log(\"按钮课程时间\" + `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`)\n      return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n    },\n    async showDetail(v, i, key) {\n      this.display = true\n      this.detail = v\n      this.reminderTime = await this.getReminderTime(i, key)\n      console.log(\"这是详情获取到的时间\" + this.reminderTime)\n    },\n  },\n\n  onShareAppMessage() {\n    return {\n      title: '课表信息',\n      path: '/pages/schedule/main'\n    }\n  }\n}\n</script>\n\n<style>\n.main {\n  position: relative;\n}\n\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  overflow: hidden;\n}\n\n.header {\n  height: 10%;\n}\n\n.hidden-bar {\n  width: 100vw;\n  margin: 0 auto;\n  text-align: center;\n  transition: all ease 0.3s;\n}\n\n.iconfont {\n  position: relative;\n  flex: 1;\n  font-size: 50rpx;\n}\n\n.iconfont::after {\n  position: absolute;\n  width: 150rpx;\n  content: attr(data-label);\n  bottom: -45rpx;\n  left: 50%;\n  transform: translateX(-50%);\n  font-size: 26rpx;\n}\n\n.show {\n  opacity: 1;\n  height: 150rpx;\n  line-height: 150rpx;\n}\n\n.hide {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n}\n\n.day-bar {\n  position: relative;\n  display: flex;\n  flex-wrap: nowrap;\n  z-index: 9999;\n  box-shadow: 0 10rpx 40rpx #fff;\n\n}\n\n.line {\n  width: 45rpx;\n  height: 5rpx;\n  margin: 5rpx 0;\n  background: rgb(85, 85, 85);\n  border-radius: 3rpx;\n  transition: all ease 0.3s;\n}\n\n.line-one-active {\n  width: 38rpx;\n  transform-origin: 8%;\n  transform: rotate3d(0, 0, 1, 45deg);\n}\n\n.line-two-active {\n  opacity: 0;\n}\n\n.line-three-active {\n  width: 38rpx;\n  transform-origin: 8%;\n  transform: rotate3d(0, 0, 1, -45deg);\n}\n\n.content {\n  flex: 1;\n  height: auto;\n  max-width: 100vw;\n  box-sizing: border-box;\n  overflow-y: scroll;\n  overflow-x: hidden;\n}\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(8, 12.5%);\n}\n\n.row {\n  text-align: center;\n}\n\n.week {\n  flex: 1;\n  text-align: center;\n}\n\n.period {\n  margin: 5rpx 0;\n  text-align: center;\n  background: white;\n  font-size: 28rpx;\n}\n\n.course {\n  box-sizing: border-box;\n  margin: 5rpx 0;\n  padding: 0 5rpx;\n  text-align: center;\n  font-size: 25rpx;\n  border-radius: 14rpx;\n  color: white;\n  overflow: hidden;\n}\n\n.course-content {\n  width: 100%;\n  height: 100%;\n  padding: 0 4rpx;\n  background: rgba(93, 151, 247, 0.5);\n  word-wrap: break-word;\n  word-break: break-all;\n}\n\n.to-login {\n  width: 100%;\n  height: 100%;\n}\n\n.to-login__icon {\n  width: 70%;\n}\n\n.to-login__btn {\n  width: 50%;\n  height: 70rpx;\n  margin: 0 auto;\n  line-height: 70rpx;\n  border-radius: 35rpx;\n  color: white;\n  text-align: center;\n}\n\n.to-login__btn01 {\n  width: 20%;\n  height: 70rpx;\n  margin: 0 auto;\n  line-height: 70rpx;\n  border-radius: 35rpx;\n  color: white;\n  text-align: center;\n}\n\n.blur {\n  filter: blur(3rpx);\n}\n\n.modal-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n}\n\n.modal {\n  position: fixed;\n  z-index: 9999;\n  left: 0;\n  bottom: 0;\n  width: 100vw;\n  font-size: 30rpx;\n  background: #fff;\n  border-top-left-radius: 30rpx;\n  border-top-right-radius: 30rpx;\n  overflow: hidden;\n  transition: all 0.3s;\n}\n\n.modal-display {\n  transform: translate3d(0, 0, 0);\n}\n\n.modal-hidden {\n  transform: translate3d(0, 100%, 0);\n}\n\n.modal-header {\n  text-align: right;\n  color: white;\n  font-size: 45rpx;\n  background: rgba(93, 151, 247);\n}\n\n.modal-content {\n  padding: 75rpx 35rpx;\n}\n\n.modal-icon {\n  width: 55rpx;\n}\n\n.picker01 {\n  width: 20%;\n}\n</style>","import mod from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1716466268433\n      var cssReload = require(\"D:/Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}